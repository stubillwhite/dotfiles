# Ctrl+| I - Install plugins
# Ctrl+| r - Reload




# Use C-\ as prefix
unbind-key C-a
set-option -g prefix 'C-\'
bind-key 'C-\' send-prefix
set -g base-index 1

# Split panes using | and -
bind | split-window -h
bind - split-window -v
unbind '"'
unbind %

# Reload config file using r
bind r source-file ~/.tmux.conf \; display-message "Reloaded config"

# Other settings
set-option -s escape-time   0          # Fast escape timer
set-option -g default-shell "/bin/zsh" # Default to Zsh
set-option -g mouse         on         # Enable mouse
# set-option -g status-left   ''         # Clean left status
# set-option -g status-right  ''         # Clean right status

# Vi keys for selection (C-\ C-[ to enter mode)
bind-key Escape copy-mode
set-window-option -g mode-keys vi
bind-key -Tcopy-mode-vi 'v' send -X begin-selection
bind-key -Tcopy-mode-vi 'y' send -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"
bind-key -Tcopy-mode-vi Escape send -X cancel
bind-key -Tcopy-mode-vi V send -X rectangle-toggle

# Vi keys for window splits
bind-key v split-window -h
bind-key s split-window -v

# Alt and arrow keys, or prefix and Vim keys for navigating panes
bind -n M-Up select-pane -U
bind -n M-Right select-pane -R
bind -n M-Down select-pane -D
bind -n M-Left select-pane -L
bind-key k select-pane -U
bind-key l select-pane -R
bind-key j select-pane -D
bind-key h select-pane -L

### Status Bar
##set-option -g status-interval 1
##set-option -g status-left ''
##set-option -g status-right '%l:%M%p'
##set-window-option -g window-status-current-style fg=magenta
##set-option -g status-style fg=default
##
### Status Bar solarized-dark (default)
##set-option -g status-bg black
##set-option -g pane-active-border-style fg=yellow
##set-option -g pane-border-style fg=cyan

# Fix pbcopy/pbpaste
if 'command -v reattach-to-user-namespace >/dev/null' \
    'set -gq @osx-pasteboard true'

# Reattach to processes if already running
if 'command -v reattach-to-user-namespace >/dev/null' \
    'set -g default-command "reattach-to-user-namespace -l /bin/zsh"'

# Force to XTerm 256 to ensure that the delete key is interpreted correctly
set -g default-terminal "xterm-256color"

# Set inactive/active window styles and pane border colours
### ColorWhite             = '#ffffff'
### ColorLightGrey         = '#bcbcbc'
### ColorDarkGrey          = '#585858'
### ColorVeryDarkGrey      = '#464646'
### ColorLightBlack        = '#262626'
### ColorBlue              = '#5f87af'
### ColorGreen             = '#87af87'
### ColorYellow            = '#ffffaf'
### ColorLightBlue         = '#8fafd7'
### ColorBlueGreen         = '#5f8787'
### ColorRed               = '#af5f5f'
### ColorPurple            = '#8787af'
### ColorHighlighterRed    = '#432222'
### ColorHighlighterGreen  = '#283C28'
### ColorHighlighterBlue   = '#223243'
### ColorHighlighterPurple = '#383855'
### ColorDiffGreen         = "#2B3328"
### ColorDiffRed           = "#43242B"
### ColorDiffBlue          = "#282838"
### ColorDiffLightBlue     = "#353545"

#set -g window-style             'fg=colour250,bg=colour236'
#set -g window-active-style      'fg=colour250,bg=color236'
#set -g pane-border-style        'fg=colour255,bg=colour238'
#set -g pane-active-border-style 'fg=colour255,bg=colour236'

# https://github.com/rose-pine/tmux/blob/main/rose-pine.tmux
### thm_base="#232136";
### thm_surface="#2a273f";
### thm_overlay="#393552";
### thm_muted="#6e6a86";
### thm_subtle="#908caa";
### thm_text="#e0def4";
### thm_love="#eb6f92";
### thm_gold="#f6c177";
### thm_rose="#ea9a97";
### thm_pine="#3e8fb0";
### thm_foam="#9ccfd8";
### thm_iris="#c4a7e7";
### thm_hl_low="#2a283e";
### thm_hl_med="#44415a";
### thm_hl_high="#56526e";
### 
###    # Status bar
###    set "status" "on"
###    set status-style "fg=$thm_pine,bg=$thm_base"
###    # set monitor-activity "on"
###    # Leave justify option to user
###    # set status-justify "left"
###    set status-left-length "200"
###    set status-right-length "200"
###
###
###    # Theoretically messages (need to figure out color placement)
###    set message-style "fg=$thm_muted,bg=$thm_base"
###    set message-command-style "fg=$thm_base,bg=$thm_gold"
###
###    # Pane styling
###    set pane-border-style "fg=$thm_hl_high"
###    set pane-active-border-style "fg=$thm_gold"
###    set display-panes-active-colour "${thm_text}"
###    set display-panes-colour "${thm_gold}"
###
###    # Windows
###    setw window-status-style "fg=${thm_iris},bg=${thm_base}"
###    setw window-status-activity-style "fg=${thm_base},bg=${thm_rose}"
###    setw window-status-current-style "fg=${thm_gold},bg=${thm_base}"
###
###    # Pane styling
###    set pane-border-style "fg=$thm_hl_high"
###    set pane-active-border-style "fg=$thm_gold"
###    set display-panes-active-colour "${thm_text}"
###    set display-panes-colour "${thm_gold}"
###
###    # Windows
###    setw window-status-style "fg=${thm_iris},bg=${thm_base}"
###    setw window-status-activity-style "fg=${thm_base},bg=${thm_rose}"
###    setw window-status-current-style "fg=${thm_gold},bg=${thm_base}"





# https://github.com/rothgar/awesome-tmux?tab=readme-ov-file#themes

### # --> Catppuccin (Frappe)
### set -ogq @thm_bg "#303446"
### set -ogq @thm_fg "#c6d0f5"
### 
### # Colors
### set -ogq @thm_rosewater "#f2d5cf"
### set -ogq @thm_flamingo "#eebebe"
### set -ogq @thm_rosewater "#f2d5cf"
### set -ogq @thm_pink "#f4b8e4"
### set -ogq @thm_mauve "#ca9ee6"
### set -ogq @thm_red "#e78284"
### set -ogq @thm_maroon "#ea999c"
### set -ogq @thm_peach "#ef9f76"
### set -ogq @thm_yellow "#e5c890"
### set -ogq @thm_green "#a6d189"
### set -ogq @thm_teal "#81c8be"
### set -ogq @thm_sky "#99d1db"
### set -ogq @thm_sapphire "#85c1dc"
### set -ogq @thm_blue "#8caaee"
### set -ogq @thm_lavender "#babbf1"
### 
### # Surfaces and overlays
### set -ogq @thm_subtext_1 "#a5adce"
### set -ogq @thm_subtext_0 "#b5bfe2"
### set -ogq @thm_overlay_2 "#949cbb"
### set -ogq @thm_overlay_1 "#838ba7"
### set -ogq @thm_overlay_0 "#737994"
### set -ogq @thm_surface_2 "#626880"
### set -ogq @thm_surface_1 "#51576d"
### set -ogq @thm_surface_0 "#414559"
### set -ogq @thm_mantle "#292c3c"
### set -ogq @thm_crust "#232634"
### 
### set -g status-right "#{E:@catppuccin_status_application}"
### set -agF status-right "#{E:@catppuccin_status_cpu}"
### set -ag status-right "#{E:@catppuccin_status_session}"
### set -ag status-right "#{E:@catppuccin_status_uptime}"
### set -agF status-right "#{E:@catppuccin_status_battery}"

# set -g @plugin 'wfxr/tmux-power'
# set -g @tmux_power_theme 'forest'
set -g @plugin '2kabhishek/tmux2k'
set -g @tmux2k-theme 'duo'
# set -g @tmux2k-theme 'duo icons'
# set -g @tmux2k-theme 'onedark'

# set the left and right plugin sections
set -g @tmux2k-left-plugins "session"
set -g @tmux2k-right-plugins "time"
set -g @tmux2k-duo-fg "#5f8787"
set -g @tmux2k-duo-bg "#262626"

# contorl refresh rate, also applies to bandwidth, cpu, gpu, ping, pomodoro, ram
set -g @tmux2k-refresh-rate 5

set -g @plugin '2kabhishek/tmux-tea'
#cd ~/.tmux/plugins/tmux-tea # replace ~/.tmux/plugins with your plugin installation path
#ln -sfnv $PWD/bin/tea.sh  ~/.local/bin/tea # Add tea to $PATH, make sure ~/.local/bin is in your $PATH

# tmux-tea                                                                  {{{1
# ==============================================================================
#cd ~/.tmux/plugins/tmux-tea # replace ~/.tmux/plugins with your plugin installation path
#ln -sfnv $PWD/bin/tea.sh  ~/.local/bin/tea # Add tea to $PATH, make sure ~/.local/bin is in your $PATH


# TPM                                                                       {{{1
# ==============================================================================

# Install if not present
if "test ! -d ~/.tmux/plugins/tpm" \
   "run 'git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm && ~/.tmux/plugins/tpm/bin/install_plugins'"

# Initialize TPM (must be at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
